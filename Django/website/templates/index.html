{% extends "layout.html" %}
{% load custom_templatetags_art %}
{% block title %} Art Drop {% endblock %}

{% block body %}
<!-- Page Content -->
<!--Carousel Wrapper-->
<body>
<div id="carousel-example-2" class="carousel slide carousel-fade" data-ride="carousel">
  <!--Indicators-->
  <ol class="carousel-indicators">
    <li data-target="#carousel-example-2" data-slide-to="0" class="active"></li>
    <li data-target="#carousel-example-2" data-slide-to="1"></li>
    <li data-target="#carousel-example-2" data-slide-to="2"></li>
  </ol>
  <!--/.Indicators-->
  <!--Slides-->
  <div class="carousel-inner" role="listbox">
    {% for advertisementSlide in advertisementSlides %}
    <div class="carousel-item {% if  forloop.counter == 1 %} active{% endif %}">
      <div class="view">
        <img class="d-block w-100 " src='{{ advertisementSlide.image.url }}'alt="First slide"></img>
        <div class="mask rgba-black-light"></div>
      </div>
      <div class="carousel-caption">
        <h3 class="h3-responsive">{{advertisementSlide.title}}</h3>
        <p>{{advertisementSlide.description}}</p>
      </div>
    </div>
    {% endfor %}
  </div>
  <!--/.Slides-->
  <!--Controls-->
  <a class="carousel-control-prev" href="#carousel-example-2" role="button" data-slide="prev">
    <span class="carousel-control-prev-icon" aria-hidden="true"></span>
    <span class="sr-only">Previous</span>
  </a>
  <a class="carousel-control-next" href="#carousel-example-2" role="button" data-slide="next">
    <span class="carousel-control-next-icon" aria-hidden="true"></span>
    <span class="sr-only">Next</span>
  </a>
  <!--/.Controls-->
</div>

<!--/.Carousel Wrapper-->
<h1 class="display-9 text-center ">Our current favorites</h1>
<div class="card-columns">
  {% for artwork in Artworks %}

  <!--Card-->
  <div id="art_item" class="card card-cascade card-ecommerce narrower mt-2 ">
    <!--Card image-->
    <div class="view view-cascade overlay">
      <img class="card-img-top" src="{{ artwork.artwork_photo.url }}"
      alt="artwork"> </img>
      <a>
        <div class="mask rgba-white-slight"></div>
      </a>
    </div>
    <!--/.Card image-->
    <!--Card content-->
    <div class="card-body card-body-cascade ">
      <!--Category & Title-->
      <h4 class="card-title text-center"><strong><a href="{% url 'artDetail_page' artwork.id %}">{{ artwork.artwork_name }}</a></strong></h4>
      <!--Description-->
      <p class="card-text">{{artwork.artwork_description }}</p>
      <!--Card footer-->
      <div class="card-footer mb-2">
        <span class="float-left">
          <a class="" data-toggle="tooltip" data-placement="top" ><img class="rounded-circle article-img"  src="{{ artwork.artist.user.userprofile.image.url }}"></a>
        </span>
        <span class="float-left ml-3">
          <a href="{% url 'artist_card' artwork.artist.user.id %}">{{ artwork.artist.user.username }}</a>
        </span>
        <span class="float-right" >
            <form id = "form-id"  >
                {% csrf_token %}
                <a class="like_button button"type="submit"
                onclick="{% if user.is_authenticated %}
                like_button({{artwork.id}},
                '{% url 'home_page' %}',
                '{{ csrf_token }}')
                {% endif %}" > <i id="heart_sign_color_{{artwork.id}}"class="fas fa-heart {%isLiked artwork.id user.id%}" ></i></a>
            </form>
        </span>
        <span class="float-right" >
        <p id="like_count_{{artwork.id}}"class= "mr-1">{{artwork.artwork_likes.count}}</p>
        </span>
        <span class="float-right">
          <a  class="" href="{% url 'artDetail_page' artwork.id %}" data-toggle="tooltip" data-placement="top" title="Add a comment"><i class="far fa-comments mr-3"></i></a>
        </span>

      </div>
    </div>
    <!--/.Card content-->
  </div>
  <!--/.Card-->

  {% endfor %}


</div>

</body>
<!--/.Card-->
<!--Page navigation-->
<nav aria-label="Page navigation example">
  <ul class="pagination pg-blue justify-content-center">
    <li class="page-item ">
      {% if page_obj.has_previous %}
      <li class="page-item"><a href="?page=1"class="page-link" >First</a></li>
      <li class="page-item"><a href="?page={{page_obj.previous_page_number }}"class="page-link" >Previous</a></li>
      {% endif %}
      {% for num in page_obj.paginator.page_range %}
      {% if page_obj.number == num %}
      <li class="page-item"><a href="?page={{num}}" class="page-link text-success" >{{ num }}</a></li>
      {% elif num > page_obj.number|add:'-3' and num < page_obj.number|add:'3' %}
      <li class="page-item"><a href="?page={{num}}" class="page-link" >{{ num }}</a></li>
      {% endif %}
      {% endfor %}

      {% if page_obj.has_next %}
      <li class="page-item"><a href="?page={{page_obj.next_page_number}}"class="page-link">Next</a></li>
      <li class="page-item"><a href="?page={{page_obj.paginator.num_pages}}"class="page-link" >Last</a></li>
      {% endif %}
    </li>

  </ul>
</nav>
<!--/Page navigation-->
<!-- /.container -->
{% endblock %}

{% block javascript %}
<script>
$("#home_page").parent().addClass("active")
</script>
{% endblock %}
